{
  "nodes": [
    {
      "parameters": {
        "multipleMethods": true,
        "path": "851a8bec-3132-465f-bd63-c86ed80d300e",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        3216,
        3472
      ],
      "id": "54ddb068-40a2-4233-8721-ab792e92257a",
      "name": "Webhook3",
      "webhookId": "851a8bec-3132-465f-bd63-c86ed80d300e"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "bf539eb4-127d-4ec0-aa0a-f2ae2547a6ab",
              "leftValue": "={{ $json.query['hub.mode'] }}",
              "rightValue": "subscribe",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            },
            {
              "id": "9774fb51-91e3-455e-9a02-e132525c7360",
              "leftValue": "={{ $json.query['hub.verify_token'] }}",
              "rightValue": "alikbek3002",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        3760,
        3216
      ],
      "id": "b8291264-e6aa-4723-8a1f-30c61b139f8a",
      "name": "If7"
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "={{ $json.query['hub.challenge'] }}",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        4064,
        3200
      ],
      "id": "23087ea9-92cb-4418-a1f4-f4ed5253224c",
      "name": "Respond to Webhook3"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.body.entry[0].messaging[0].message.text }}",
        "options": {
          "systemMessage": "=# –†–û–õ–¨ –ò –ü–ï–†–°–û–ù–ê\n–í—ã ‚Äî –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞ \"–õ–µ–≥–∏–æ–Ω –°—Ç–æ—Ä\". –í—ã –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π –∏ —ç–Ω–µ—Ä–≥–∏—á–Ω—ã–π —ç–∫—Å–ø–µ—Ä—Ç –ø–æ —à–∏—Ä–æ–∫–æ–º—É –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç—É —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∏ (–Ω–æ—É—Ç–±—É–∫–∏, –Ø–Ω–¥–µ–∫—Å —Å—Ç–∞–Ω—Ü–∏–∏, –ø—Ä–∏–Ω—Ç–µ—Ä—ã, –∫–æ–ª–æ–Ω–∫–∏, PlayStation, Instax).\n–í–∞—à–∞ —Ü–µ–ª—å: –ü–æ–º–æ—á—å –∫–ª–∏–µ–Ω—Ç—É –≤—ã–±—Ä–∞—Ç—å —Ç–æ–≤–∞—Ä, –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑.\n\n# –Ø–ó–´–ö–û–í–ê–Ø –ü–û–õ–ò–¢–ò–ö–ê (–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û)\n–ü–û –£–ú–û–õ–ß–ê–ù–ò–Æ –û–¢–í–ï–ß–ê–ô–¢–ï –ù–ê –ö–´–†–ì–´–ó–°–ö–û–ú –Ø–ó–´–ö–ï. –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –ø–∏—à–µ—Ç –Ω–∞ –∫—ã—Ä–≥—ã–∑—Å–∫–æ–º - –æ—Ç–≤–µ—á–∞–π—Ç–µ –¢–û–õ–¨–ö–û –Ω–∞ –∫—ã—Ä–≥—ã–∑—Å–∫–æ–º. –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –ø–∏—à–µ—Ç –Ω–∞ —Ä—É—Å—Å–∫–æ–º - –æ—Ç–≤–µ—á–∞–π—Ç–µ –¢–û–õ–¨–ö–û –Ω–∞ —Ä—É—Å—Å–∫–æ–º. –ù–ò–ö–û–ì–î–ê –Ω–µ –º–µ–Ω—è–π—Ç–µ —è–∑—ã–∫ –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞.\n\n# –õ–û–ì–ò–ö–ê –ê–ù–ê–õ–ò–ó–ê –ö–û–ù–¢–ï–ö–°–¢–ê (–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û)\n–ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –æ—Ç–≤–µ—Ç–æ–º –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞:\n1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è: –ï—Å–ª–∏ –≤ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤—ã –£–ñ–ï –∑–¥–æ—Ä–æ–≤–∞–ª–∏—Å—å —Å –∫–ª–∏–µ–Ω—Ç–æ–º, –∏–ª–∏ –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –∑–∞–¥–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –≤–æ–ø—Ä–æ—Å (–Ω–µ \"–ø—Ä–∏–≤–µ—Ç\"), –ù–ò–ö–û–ì–î–ê –Ω–µ –∑–¥–æ—Ä–æ–≤–∞–π—Ç–µ—Å—å –ø–æ–≤—Ç–æ—Ä–Ω–æ. –°—Ä–∞–∑—É –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ –æ—Ç–≤–µ—Ç—É –∏–ª–∏ –ø–æ–∏—Å–∫—É.\n2. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞:\n   - –ï—Å–ª–∏ —ç—Ç–æ –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —è–∑—ã–∫ (–†—É—Å—Å–∫–∏–π –∏–ª–∏ –ö—ã—Ä–≥—ã–∑—Å–∫–∏–π). –ü–û –£–ú–û–õ–ß–ê–ù–ò–Æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ö—ã—Ä–≥—ã–∑—Å–∫–∏–π, –µ—Å–ª–∏ –Ω–µ –æ—á–µ–≤–∏–¥–Ω–æ, —á—Ç–æ –∫–ª–∏–µ–Ω—Ç –ø–∏—à–µ—Ç –Ω–∞ –†—É—Å—Å–∫–æ–º.\n   - –ï—Å–ª–∏ –¥–∏–∞–ª–æ–≥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è: –°—Ç—Ä–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ—Ç —è–∑—ã–∫, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –≤—ã –Ω–∞—á–∞–ª–∏ –æ–±—â–µ–Ω–∏–µ. –ù–ï –ú–ï–ù–Ø–ô–¢–ï —è–∑—ã–∫ –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ –¥–∏–∞–ª–æ–≥–∞.\n   - –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –ø–∏—à–µ—Ç –Ω–∞ –ö—ã—Ä–≥—ã–∑—Å–∫–æ–º -> –û—Ç–≤–µ—á–∞–π—Ç–µ –¢–û–õ–¨–ö–û –Ω–∞ –ö—ã—Ä–≥—ã–∑—Å–∫–æ–º.\n   - –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –ø–∏—à–µ—Ç –Ω–∞ –†—É—Å—Å–∫–æ–º -> –û—Ç–≤–µ—á–∞–π—Ç–µ –¢–û–õ–¨–ö–û –Ω–∞ –†—É—Å—Å–∫–æ–º.\n\n# üõ† –ò–°–¢–û–ß–ù–ò–ö –î–ê–ù–ù–´–• (–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û)\n–í—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–∞—Ö, —Ü–µ–Ω–∞—Ö –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞—Ö –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ Google Sheets.\n–î–ª—è –õ–Æ–ë–û–ì–û –∑–∞–ø—Ä–æ—Å–∞ –æ —Ç–æ–≤–∞—Ä–µ –≤—ã –û–ë–Ø–ó–ê–ù–´ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç Google Sheets.\n- –ù–ò–ö–û–ì–î–ê –Ω–µ –ø—Ä–∏–¥—É–º—ã–≤–∞–π—Ç–µ —Ü–µ–Ω—ã –∏–ª–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏.\n- –ù–ò–ö–û–ì–î–ê –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–≤–æ–µ–π –ø–∞–º—è—Ç–∏, –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü–µ.\n- –ï—Å–ª–∏ —Ç–æ–≤–∞—Ä–∞ –Ω–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü–µ, —Å–æ–æ–±—â–∏—Ç–µ –æ–± —ç—Ç–æ–º –∫–ª–∏–µ–Ω—Ç—É –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç–µ –∞–Ω–∞–ª–æ–≥, –∫–æ—Ç–æ—Ä—ã–π –ï–°–¢–¨ –≤ —Ç–∞–±–ª–∏—Ü–µ.\n- –¶–µ–Ω—ã –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –±–µ—Ä–∏—Ç–µ –¢–û–õ–¨–ö–û –∏–∑ –æ—Ç–≤–µ—Ç–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞.\n\n# –°–¶–ï–ù–ê–†–ò–ò –î–ò–ê–õ–û–ì–ê\n\n## –°–¶–ï–ù–ê–†–ò–ô 1: –ù–ê–ß–ê–õ–û (–¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞ –∏–ª–∏ –∫–ª–∏–µ–Ω—Ç –ø—Ä–æ—Å—Ç–æ –ø–æ–∑–¥–æ—Ä–æ–≤–∞–ª—Å—è)\n–ö—ã—Ä–≥—ã–∑—Å–∫–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é): \"–°–∞–ª–∞–º–∞—Ç—Å—ã–∑–±—ã! –°–∏–∑–¥–∏ –õ–µ–≥–∏–æ–Ω –°—Ç–æ—Ä –∫—É—Ç—Ç—É–∫—Ç–∞–π—Ç. –ú–µ–Ω —Å–∏–∑–≥–µ —Ç–µ—Ö–Ω–∏–∫–∞ —Ç–∞–Ω–¥–æ–æ–≥–æ –∂–∞—Ä–¥–∞–º –±–µ—Ä–µ–º. –°–∏–∑–¥–∏ —ç–º–Ω–µ –∫—ã–∑—ã–∫—Ç—ã—Ä–∞—Ç: –Ω–æ—É—Ç–±—É–∫—Ç–∞—Ä, –∫–æ–ª–æ–Ω–∫–∞–ª–∞—Ä, –ø—Ä–∏–Ω—Ç–µ—Ä–ª–µ—Ä –∂–µ –±–∞—à–∫–∞ —Ç–µ—Ö–Ω–∏–∫–∞–±—ã?\"\n–†—É—Å—Å–∫–∏–π (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç —è–≤–Ω–æ –ø–∏—à–µ—Ç –Ω–∞ —Ä—É—Å—Å–∫–æ–º): \"–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –í–∞—Å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –õ–µ–≥–∏–æ–Ω –°—Ç–æ—Ä. –Ø –ø–æ–º–æ–≥—É –≤–∞–º –ø–æ–¥–æ–±—Ä–∞—Ç—å —Ç–µ—Ö–Ω–∏–∫—É. –ß—Ç–æ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç: –Ω–æ—É—Ç–±—É–∫–∏, –∫–æ–ª–æ–Ω–∫–∏, –ø—Ä–∏–Ω—Ç–µ—Ä—ã –∏–ª–∏ –¥—Ä—É–≥–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ?\"\n\n## –°–¶–ï–ù–ê–†–ò–ô 2: –ü–û–î–ë–û–† –¢–û–í–ê–†–ê (–û—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–∂–∏–º)\n1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–∏—Å–∫ –ø–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –±–∞–∑–µ.\n2. –í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç 1 –¥–æ 4 –ª—É—á—à–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤.\n3. –í—ã–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç —Å—Ç—Ä–æ–≥–æ –ø–æ —Ñ–æ—Ä–º–∞—Ç—É:\n\n[–ö—Ä–∞—Ç–∫–æ–µ –≤—Å—Ç—É–ø–ª–µ–Ω–∏–µ, 1 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ]\n\n–ë—Ä–µ–Ω–¥ + –ú–æ–¥–µ–ª—å\n–¶–µ–Ω–∞: –¶–µ–Ω–∞ —Å–æ–º\n–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:\n   - [–ö–ª—é—á–µ–≤–∞—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ 1]\n   - [–ö–ª—é—á–µ–≤–∞—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ 2]\n   - ...\n–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞: [2-3 –ø—É–Ω–∫—Ç–∞]\n\n---\n[–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–ª—è –¥—Ä—É–≥–∏—Ö –º–æ–¥–µ–ª–µ–π]\n\n[–í–æ–ø—Ä–æ—Å –∫–ª–∏–µ–Ω—Ç—É –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è]\n\n## –°–¶–ï–ù–ê–†–ò–ô 3: –û–§–û–†–ú–õ–ï–ù–ò–ï –ó–ê–ö–ê–ó–ê\n–ö–æ–≥–¥–∞ –∫–ª–∏–µ–Ω—Ç —Ö–æ—á–µ—Ç –∫—É–ø–∏—Ç—å, –∑–∞–ø—Ä–æ—Å–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ (–Ω–∞ —è–∑—ã–∫–µ –∫–ª–∏–µ–Ω—Ç–∞):\n1. –ò–º—è\n2. –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞\n3. –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏ (–ì–æ—Ä–æ–¥, —É–ª–∏—Ü–∞, –¥–æ–º)\n\n–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, –ø–æ–∫–∞–∂–∏—Ç–µ —Å–≤–æ–¥–∫—É –∏ –ø–æ–ø—Ä–æ—Å–∏—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ (–î–∞/–ù–µ—Ç).\n\n## –°–¶–ï–ù–ê–†–ò–ô 4: –§–ò–ù–ê–õ–ò–ó–ê–¶–ò–Ø (–¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–º)\n–ï–°–õ–ò –∫–ª–∏–µ–Ω—Ç –æ—Ç–≤–µ—Ç–∏–ª \"–î–∞/–í–µ—Ä–Ω–æ/–¢—É—É—Ä–∞\":\n1. –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –≤—ã–∑–æ–≤–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç `Send Order` (Telegram). –ü–µ—Ä–µ–¥–∞–π—Ç–µ —Ç—É–¥–∞: username, –∏–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω, –∞–¥—Ä–µ—Å, –º–æ–¥–µ–ª—å —Ç–æ–≤–∞—Ä–∞, —Ü–µ–Ω—É.\n2. –¢–û–õ–¨–ö–û –ü–û–°–õ–ï —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –æ—Ç–≤–µ—Ç—å—Ç–µ –∫–ª–∏–µ–Ω—Ç—É:\n   –ö—ã—Ä–≥—ã–∑—Å–∫–∏–π: \"–†–∞—Ö–º–∞—Ç! –ë—É—é—Ä—Ç–º–∞“£—ã–∑ –∫–∞–±—ã–ª –∞–ª—ã–Ω–¥—ã. –ë–∏–∑–¥–∏–Ω –º–µ–Ω–µ–¥–∂–µ—Ä –∂–∞–∫—ã–Ω–¥–∞ —Å–∏–∑ –º–µ–Ω–µ–Ω –±–∞–π–ª–∞–Ω—ã—à—ã–ø, –∂–µ—Ç–∫–∏—Ä“Ø“Ø–Ω“Ø —É—é—à—Ç—É—Ä–∞—Ç.\"\n   –†—É—Å—Å–∫–∏–π: \"–°–ø–∞—Å–∏–±–æ! –í–∞—à –∑–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç. –ù–∞—à –º–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.\"\n\n\n# –í–ê–ñ–ù–´–ï –ó–ê–ü–†–ï–¢–´\n- –ù–µ –∑–¥–æ—Ä–æ–≤–∞–π—Ç–µ—Å—å –≤ –∫–∞–∂–¥–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏.\n- –ù–µ –º–µ–Ω—è–π—Ç–µ —è–∑—ã–∫ –æ–±—â–µ–Ω–∏—è.\n- –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ –ø—É—Å—Ç—ã–µ –ø–æ–ª—è (null/undefined).\n- –ù–µ –æ—Ñ–æ—Ä–º–ª—è–π—Ç–µ –∑–∞–∫–∞–∑ –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–º.\n- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–≤–æ–π–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏ –∏ –ø–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫–∏.\n- –û—Ç–≤–µ—Ç –°–¢–†–û–ì–û –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å 600 —Å–∏–º–≤–æ–ª–æ–≤. –ë—É–¥—å—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∫—Ä–∞—Ç–∫–∏–º–∏."
        }
      },
      "id": "539b0c8a-cb4b-436c-bcfc-0cb858321836",
      "name": "New RAG Agent9",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.7,
      "position": [
        4112,
        3568
      ]
    },
    {
      "parameters": {
        "options": {
          "temperature": 0.5
        }
      },
      "id": "bbf20527-aa8f-4fc1-81c6-48cbfd05b17b",
      "name": "OpenAI Chat Model10",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1,
      "position": [
        4048,
        3792
      ],
      "credentials": {
        "openAiApi": {
          "id": "1T30bcIe2tfs32N6",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $json.body.entry[0].messaging[0].sender.id }}\n{{ $json.body.entry[0].time }}\n{{ $json.body.entry[0].messaging[0].message.text }}",
        "tableName": "n8n_chat_histories_instagram_test",
        "contextWindowLength": 100
      },
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        4192,
        3792
      ],
      "id": "263b78f1-308e-4248-b3dd-b0d8a4a73d30",
      "name": "Postgres Chat Memory9",
      "credentials": {
        "postgres": {
          "id": "OT1HePP3LZQoN2Hp",
          "name": "LegionDB"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://graph.instagram.com/v24.0/me/messages",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ {\n \"recipient\": {\n \"id\": $('Webhook3').item.json.body.entry[0].messaging[0].sender.id\n },\n \"message\": {\n \"text\": ($json.text_message)\n }\n} }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        5120,
        3568
      ],
      "id": "a0fdc23d-2ac6-4146-a403-a8c24a53929f",
      "name": "HTTP Request3",
      "credentials": {
        "httpHeaderAuth": {
          "id": "h3VXvlRydzcEJV14",
          "name": "Header Auth account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "55c7fd14-474f-41af-b7fc-f468f69c043a",
              "name": "text_message",
              "value": "={{ $json.output }}",
              "type": "string"
            },
            {
              "id": "7bf16756-ea31-4d7d-bbc9-d586cb82fd7d",
              "name": "recipient_id",
              "value": "={{ $('Webhook3').item.json.body.entry[0].messaging[0].recipient.id }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        4896,
        3568
      ],
      "id": "5f7e30d1-ec9c-421b-93d7-e0f55d8f5c9a",
      "name": "Edit Fields3"
    },
    {
      "parameters": {
        "jsCode": "const agentOutput = $input.first().json.output;\nlet sanitized = agentOutput;\nif (sanitized.length > 1000) {\n  sanitized = sanitized.substring(0, 1000);\n}\nreturn [{ json: { output: sanitized } }];"
      },
      "id": "2d6cc6b6-8dd7-4187-839c-4e09ccb62406",
      "name": "Sanitize JSON Output3",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        4624,
        3568
      ]
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.noOp",
      "typeVersion": 1,
      "position": [
        4080,
        3376
      ],
      "id": "3acb19fa-ef1d-46af-b41d-68c9f4d7e46a",
      "name": "No Operation, do nothing3"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.entry[0].messaging[0].message.is_echo }}",
                    "rightValue": "",
                    "operator": {
                      "type": "boolean",
                      "operation": "exists",
                      "singleValue": true
                    },
                    "id": "3a970b15-78b1-4bda-b1d4-cca63f8e0bbb"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "a0ce58d3-d1ab-4669-90c6-503b38b0b154",
                    "leftValue": "={{ $json.body.entry[0].messaging[0].message.is_echo }}",
                    "rightValue": "",
                    "operator": {
                      "type": "boolean",
                      "operation": "notExists",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        3632,
        3520
      ],
      "id": "89ebd468-eba2-4572-b8ae-4c3d02ad7038",
      "name": "Switch4"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "12tbIetPvwP2brtHVIhndRWKhmJ5kQHncEEVWuG_hZOQ",
          "mode": "list",
          "cachedResultName": "–ë–∞–∑–∞ —á–∞—Ç –±–æ—Ç",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/12tbIetPvwP2brtHVIhndRWKhmJ5kQHncEEVWuG_hZOQ/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 304565474,
          "mode": "list",
          "cachedResultName": "–õ–∏—Å—Ç1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/12tbIetPvwP2brtHVIhndRWKhmJ5kQHncEEVWuG_hZOQ/edit#gid=304565474"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTool",
      "typeVersion": 4.7,
      "position": [
        4384,
        3792
      ],
      "id": "f3a0d11b-6ae5-44eb-867f-446cce02a28b",
      "name": "Get row(s) in sheet in Google Sheets1",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "OWurL5IjCcK1JibL",
          "name": "Google Sheets account"
        }
      }
    }
  ],
  "connections": {
    "Webhook3": {
      "main": [
        [
          {
            "node": "If7",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If7": {
      "main": [
        [
          {
            "node": "Respond to Webhook3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "New RAG Agent9": {
      "main": [
        [
          {
            "node": "Sanitize JSON Output3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model10": {
      "ai_languageModel": [
        [
          {
            "node": "New RAG Agent9",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Postgres Chat Memory9": {
      "ai_memory": [
        [
          {
            "node": "New RAG Agent9",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields3": {
      "main": [
        [
          {
            "node": "HTTP Request3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Sanitize JSON Output3": {
      "main": [
        [
          {
            "node": "Edit Fields3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch4": {
      "main": [
        [
          {
            "node": "No Operation, do nothing3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "New RAG Agent9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet in Google Sheets1": {
      "ai_tool": [
        [
          {
            "node": "New RAG Agent9",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {
    "Webhook3": [
      {
        "headers": {
          "host": "alikbekalatoo77.app.n8n.cloud",
          "user-agent": "facebookexternalua",
          "content-length": "521",
          "accept": "*/*",
          "accept-encoding": "gzip, br",
          "cdn-loop": "cloudflare; loops=1; subreqs=1",
          "cf-connecting-ip": "2a03:2880:25ff:4d::",
          "cf-ew-via": "15",
          "cf-ipcountry": "US",
          "cf-ray": "9a52feab37e4b31d-ATL",
          "cf-visitor": "{\"scheme\":\"https\"}",
          "cf-worker": "n8n.cloud",
          "content-type": "application/json",
          "instagram-api-version": "v24.0",
          "x-forwarded-for": "2a03:2880:25ff:4d::, 104.22.1.79",
          "x-forwarded-host": "alikbekalatoo77.app.n8n.cloud",
          "x-forwarded-port": "443",
          "x-forwarded-proto": "https",
          "x-forwarded-server": "traefik-prod-users-gwc-2-ddc688d69-tpm5s",
          "x-hub-signature": "sha1=b08772b86a1053deb1daabb0467bc0bd22a70864",
          "x-hub-signature-256": "sha256=9513670c5048787a02d87410750eb44fc6ddc6a4396cc5e85828b9c135894776",
          "x-is-trusted": "yes",
          "x-real-ip": "2a03:2880:25ff:4d::"
        },
        "params": {},
        "query": {},
        "body": {
          "object": "instagram",
          "entry": [
            {
              "time": 1764260865727,
              "id": "17841468856094074",
              "messaging": [
                {
                  "sender": {
                    "id": "858265120014929"
                  },
                  "recipient": {
                    "id": "17841468856094074"
                  },
                  "timestamp": 1764260865357,
                  "message": {
                    "mid": "aWdfZAG1faXRlbToxOklHTWVzc2FnZAUlEOjE3ODQxNDY4ODU2MDk0MDc0OjM0MDI4MjM2Njg0MTcxMDMwMTI0NDI3NjA3ODk5MjMzMjM4MjE4MDozMjU0NDg2ODY2MjUwNjU5MTk1MzM3MTI2NjI4MzQ3MDg0OAZDZD",
                    "text": "–ö–∞–∫–∏–µ —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–∏–Ω—Ç–µ—Ä—ã?"
                  }
                }
              ]
            }
          ]
        },
        "webhookUrl": "https://alikbekalatoo77.app.n8n.cloud/webhook/851a8bec-3132-465f-bd63-c86ed80d300e",
        "executionMode": "production"
      }
    ]
  },
  "meta": {
    "instanceId": "3bd415084c202701a4e18d9b066a68ad477720c950e1c2cba4cb2537b78acc07"
  }
}